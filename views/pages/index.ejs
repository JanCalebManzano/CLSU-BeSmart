<% if(user){ %>
    <% if(user.accessLevel != "administrator"){ %>
        <script>window.location.href = "/users/logout";</script>
    <% } else{%>
        <script>window.location.href = "/dashboard";</script>
    <% } %>
<% } %>

<% include ../partials/header %>
    <div class="header-wrapper">
        <nav class="navbar navbar-transparent navbar-fixed-top" role="navigation" color-on-scroll>
            <div class="container">
                <div class="navbar-header">
                    <button id="menu-toggle" type="button" class="navbar-toggle">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar bar1"></span>
                    <span class="icon-bar bar2"></span>
                    <span class="icon-bar bar3"></span>
                    </button>
                    <a href="/">
                        <div class="logo-container">
                            <div class="logo" style="width:80px;height:80px;">
                                <img src="../images/logo white.svg" alt="BeSmart Logo">
                            </div>
                            <div id="systemName" class="brand">
                                Barcode-Enabled Solution for Monitoring Attendance and Reading Time
                            </div>
                        </div>
                    </a>
                </div>

                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        <li>                                
                            <a id="loginBtn" class="btn btn-neutral btn-lg btn-round btn-fill">Login</a>
                        </li>
                        <li>                                
                            <a id="registerBtn" href="#registerPanel" class="btn btn-neutral btn-lg btn-round btn-fill">Register</a>
                        </li>
                    </ul>          
                </div>
            </div>
        </nav>

        <div class="header" style="background-image: url('./images/banner.svg');">
        </div>
    </div>

    <div id="forms" class="main-panel">
        <div class="content">

            <div id="loginForm"  class="container">               

                <div class="row">
                    <div class="col-md-10">
                        <div class="card" id="loginPanel">

                            <div class="card-body">
                                <div class="row mb-2">
                                    <h1 class="card-title text-center text-info">Login Form</h1>
                                </div>

                                <div class="row">
                                    <div class="col-md-8 col-md-offset-2">
                                        <%- messages('partials/message', locals) %>
                                    </div>
                                </div>

                                <form name="frmLogin" action="/users/login" method="POST">
                                    <div class="row">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <label>Username</label>
                                                <input type="text" class="form-control" placeholder="Username" name="username" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <label>Password</label>
                                                <input type="password" class="form-control" placeholder="Password" name="password" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-7">
                                            <button type="submit" class="btn btn-info btn-fill pull-right">Login</button>
                                        </div>
                                    </div>
                                </form>                                    
                            </div>

                        </div>
                    </div>
                </div>
            </div>
            
            <div id="registerForm" class="container">               

                <div class="row">
                    <div class="col-md-10">
                        <div class="card" id="registerPanel">
                            
                            <div class="card-body">
                                <div class="row mb-2">
                                    <h1 class="card-title text-center text-info">Register Form</h1>                                    
                                </div>

                                <form name="frmRegister" action="/users/register" method="POST" >
                                    <div class="row">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <label>Email</label>
                                                <input type="text" class="form-control" placeholder="Email" name="email" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <label>Username</label>
                                                <input type="text" class="form-control" placeholder="Username" name="username" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <label>Password</label>
                                                <input type="password" class="form-control" placeholder="Password" name="password" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-6 col-md-offset-3">
                                            <div class="form-group">
                                                <label>Retype Password</label>
                                                <input type="password" class="form-control" placeholder="Password" name="password2" value="">
                                            </div>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-7">
                                            <button type="submit" class="btn btn-info btn-fill pull-right">Register</button>
                                        </div>
                                    </div>
                                </form>                                    
                            </div>
                        
                        </div>

                        </div>
                    </div>
                </div>
            </div>

        </div>
<% include ../partials/footer %>

<script src="./js/index.js"></script>
<script>
    var x = document.getElementsByClassName("alert-error");
    if( x[0] ) {
        if(x[0].innerHTML != ""){
            document.getElementById("forms").style.display = "block";
            document.getElementById("loginForm").style.display = "block";
            document.getElementById("registerForm").style.display = "none";
        }
    }
</script>
