<% if(!user){ %>
    <!-- <script>window.location.href = "/";</script> -->
<% } else if(user.accessLevel != "administrator"){ %>
    <!-- <script>window.location.href = "/";</script> -->
<% }%>

<% include ../partials/header %>

<div class="wrapper">

    <% include ../partials/sidebar %>

    <div class="main-panel">
        <% include ../partials/navbar %>


        <div class="container mt-5" id="progress-bar-container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="progress progress-striped active progress-sm">
                        <div class="progress-bar" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
                            <span class="sr-only">0% Complete</span>
                        </div>
                    </div>
                </div>    
            </div>            
        </div>


        
        <div class="content">
            
            <div class="container-fluid">
                
                <!-- Charts -->
                <div class="row">

                    <div class="col-md-4 col-md-offset-2" id="container-reading-time-year">

                        <div class="card mb-3">
                            <div class="card-header">
                                <h3 class="title">
                                    <i class="pe-7s-graph"></i>
                                    Annual Patron Reading Time
                                </h3>
                            </div>
    
                            <div class="card-body">
                                <div class="container-fluid mb-3">
                                    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                        </div>
                                        <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                        </div>
                                    </div>
                                    <canvas id="chart-reading-time-year" width="487" height="487" class="chartjs-render-monitor" style="display: block; width: 487px; height: 487px;"></canvas>
                                </div>

                                <div class="jumbotron chart-text-summary" id="text-reading-time-year">
                                    <p class="text-summary">
                                        Library Reading Time has
                                            a <i class="text-warning">total</i> of <b class="text-info text-total"></b> hours and
                                            an <i class="text-warning">average</i> of <b class="text-info text-average"></b> hours
                                        per <i class="text-reading-time"></i>.
                                    </p>
                                    <p class="text-data"></p>
                                </div>
                            </div>
    
                            <div class="card-footer text-muted">
                                <button id="print-chart-reading-time-year" type="button" class="btn btn-primary toggle-print-chart">
                                    <i class="pe-7s-print mr-2" style="font-size:20px;"></i>
                                    Print Chart                                    
                                </button>
                                <button id="show-text-reading-time-year" type="button" class="btn btn-primary toggle-text-summary" onclick="toggleTextSummary(this, 'year')">Show Summary</button>
                                <h5 class="stats">
                                    Updated at <span class="last-updated text-info"></span>
                                </h5>
                            </div>
                        </div>

                    </div>



                    <div class="col-md-4" id="container-reading-time-month">

                        <div class="card mb-3">
                            <div class="card-header">
                                <h3 class="title">
                                    <i class="pe-7s-graph"></i>
                                    Monthly Patron Reading Time for <span class="chart-reading-time-month-year"></span>
                                </h3>
                                
                                <select class="form-control input-md d-print-none" name="year" id="chart-reading-time-month-year">
                                    <% for( var x=0; x<5; x++ ) { %>
                                        <option value="<%= new Date().getFullYear() - x %>"><%= new Date().getFullYear() - x %></option>
                                    <% } %>
                                </select>
                            </div>
    
                            <div class="card-body">
                                <div class="container-fluid mb-3">
                                    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                        </div>
                                        <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                        </div>
                                    </div>
                                    <canvas id="chart-reading-time-month" width="487" height="487" class="chartjs-render-monitor" style="display: block; width: 487px; height: 487px;"></canvas>
                                </div>

                                <div class="jumbotron chart-text-summary" id="text-reading-time-month">
                                    <p class="text-summary">
                                        Library Reading Time has
                                            a <i class="text-warning">total</i> of <b class="text-info text-total"></b> hours and
                                            an <i class="text-warning">average</i> of <b class="text-info text-average"></b> hours
                                        per <i class="text-reading-time"></i>.
                                    </p>
                                    <p class="text-data"></p>
                                </div>
                            </div>
    
                            <div class="card-footer text-muted">
                                <button id="print-chart-reading-time-month" type="button" class="btn btn-primary toggle-print-chart">
                                    <i class="pe-7s-print mr-2" style="font-size:20px;"></i>
                                    Print Chart                                    
                                </button>
                                <button id="show-text-reading-time-month" type="button" class="btn btn-primary toggle-text-summary" onclick="toggleTextSummary(this, 'month')">Show Summary</button>
                                <h5 class="stats">
                                    Updated at <span class="last-updated text-info"></span>
                                </h5>
                            </div>
                        </div>

                    </div>

                </div>



                <div class="row">

                    <div class="col-md-8 col-md-offset-2" id="container-reading-time-course">

                        <div class="card mb-3">
                            <div class="card-header">
                                <h3 class="title">
                                    <i class="pe-7s-graph"></i>
                                    Reading Time per Course                                    
                                </h3>
                            </div>
    
                            <div class="card-body">
                                <div class="container-fluid mb-3">
                                    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                        </div>
                                        <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                        </div>
                                    </div>
                                    <canvas id="chart-reading-time-course" width="487" height="487" class="chartjs-render-monitor" style="display: block; width: 487px; height: 487px;"></canvas>
                                </div>

                                <div class="jumbotron chart-text-summary" id="text-reading-time-course">
                                    <p class="text-summary">
                                        Library Reading Time has
                                            a <i class="text-warning">total</i> of <b class="text-info text-total"></b> hours and
                                            an <i class="text-warning">average</i> of <b class="text-info text-average"></b> hours
                                        per <i class="text-reading-time"></i>.
                                    </p>
                                    <p class="text-data"></p>
                                </div>
                            </div>
    
                            <div class="card-footer text-muted">
                                <button id="print-chart-reading-time-course" type="button" class="btn btn-primary toggle-print-chart">
                                    <i class="pe-7s-print mr-2" style="font-size:20px;"></i>
                                    Print Chart                                    
                                </button>
                                <button id="show-text-reading-time-course" type="button" class="btn btn-primary toggle-text-summary" onclick="toggleTextSummary(this, 'course')">Show Summary</button>
                                <h5 class="stats">
                                    Updated at <span class="last-updated text-info"></span>
                                </h5>
                            </div>
                        </div>

                    </div>                    

                </div>   
                
                

                <div class="row">                                                            

                    <div class="col-md-4 col-md-offset-2" id="container-reading-time-section">

                        <div class="card mb-3">
                            <div class="card-header">
                                <h3 class="title">
                                    <i class="pe-7s-graph"></i>
                                    Patron Reading Time per Library Section
                                </h3>
                            </div>
    
                            <div class="card-body">
                                <div class="container-fluid mb-3">
                                    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                        </div>
                                        <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                        </div>
                                    </div>
                                    <canvas id="chart-reading-time-section" width="487" height="487" class="chartjs-render-monitor" style="display: block; width: 487px; height: 487px;"></canvas>
                                </div>

                                <div class="jumbotron chart-text-summary" id="text-reading-time-section">
                                    <p class="text-summary">
                                        Library Reading Time has
                                            a <i class="text-warning">total</i> of <b class="text-info text-total"></b> hours and
                                            an <i class="text-warning">average</i> of <b class="text-info text-average"></b> hours
                                        per <i class="text-reading-time"></i>.
                                    </p>
                                    <p class="text-data"></p>
                                </div>
                            </div>
    
                            <div class="card-footer text-muted">
                                <button id="print-chart-reading-time-section" type="button" class="btn btn-primary toggle-print-chart">
                                    <i class="pe-7s-print mr-2" style="font-size:20px;"></i>
                                    Print Chart                                    
                                </button>
                                <button id="show-text-reading-time-section" type="button" class="btn btn-primary toggle-text-summary" onclick="toggleTextSummary(this, 'section')">Show Summary</button>
                                <h5 class="stats">
                                    Updated at <span class="last-updated text-info"></span>
                                </h5>
                            </div>
                        </div>
                            
                    </div>



                    <div class="col-md-4" id="container-reading-time-gender">

                        <div class="card mb-3">
                            <div class="card-header">
                                <h3 class="title">
                                    <i class="pe-7s-graph"></i>
                                    Patron Reading Time per Gender
                                </h3>
                            </div>
    
                            <div class="card-body">
                                <div class="container-fluid mb-3">
                                    <div class="chartjs-size-monitor" style="position: absolute; left: 0px; top: 0px; right: 0px; bottom: 0px; overflow: hidden; pointer-events: none; visibility: hidden; z-index: -1;">
                                        <div class="chartjs-size-monitor-expand" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div>
                                        </div>
                                        <div class="chartjs-size-monitor-shrink" style="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;">
                                            <div style="position:absolute;width:200%;height:200%;left:0; top:0"></div>
                                        </div>
                                    </div>
                                    <canvas id="chart-reading-time-gender" width="487" height="487" class="chartjs-render-monitor" style="display: block; width: 487px; height: 487px;"></canvas>
                                </div>

                                <div class="jumbotron chart-text-summary" id="text-reading-time-gender">
                                    <p class="text-summary">
                                        Library Reading Time has
                                            a <i class="text-warning">total</i> of <b class="text-info text-total"></b> hours and
                                            an <i class="text-warning">average</i> of <b class="text-info text-average"></b> hours
                                        per <i class="text-reading-time"></i>.
                                    </p>
                                    <p class="text-data"></p>
                                </div>
                            </div>
    
                            <div class="card-footer text-muted">
                                <button id="print-chart-reading-time-gender" type="button" class="btn btn-primary toggle-print-chart">
                                    <i class="pe-7s-print mr-2" style="font-size:20px;"></i>
                                    Print Chart                                    
                                </button>
                                <button id="show-text-reading-time-gender" type="button" class="btn btn-primary toggle-text-summary" onclick="toggleTextSummary(this, 'gender')">Show Summary</button>
                                <h5 class="stats">
                                    Updated at <span class="last-updated text-info"></span>
                                </h5>
                            </div>
                        </div>

                    </div>

                </div>
                                
            </div>

        </div>

        <% include ../partials/panel-footer %>
    </div>
</div>



<% include ../partials/footer %>

<script src="./js/reading-time.js"></script>